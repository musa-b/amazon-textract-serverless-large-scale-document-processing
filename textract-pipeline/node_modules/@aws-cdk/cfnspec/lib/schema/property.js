"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const base_types_1 = require("./base-types");
var UpdateType;
(function (UpdateType) {
    UpdateType["Conditional"] = "Conditional";
    UpdateType["Immutable"] = "Immutable";
    UpdateType["Mutable"] = "Mutable";
})(UpdateType = exports.UpdateType || (exports.UpdateType = {}));
function isUpdateType(str) {
    switch (str) {
        case UpdateType.Conditional:
        case UpdateType.Immutable:
        case UpdateType.Mutable:
            return true;
        default:
            return false;
    }
}
exports.isUpdateType = isUpdateType;
function isScalarPropery(prop) {
    return isPrimitiveProperty(prop)
        || isComplexProperty(prop)
        // A UnionProperty is only Scalar if it defines Types or PrimitiveTypes
        || (isUnionProperty(prop) && !!(prop.Types || prop.PrimitiveTypes));
}
exports.isScalarPropery = isScalarPropery;
function isPrimitiveProperty(prop) {
    return !!prop.PrimitiveType;
}
exports.isPrimitiveProperty = isPrimitiveProperty;
function isComplexProperty(prop) {
    const propType = prop.Type;
    return propType != null && propType !== 'Map' && propType !== 'List';
}
exports.isComplexProperty = isComplexProperty;
function isCollectionProperty(prop) {
    return isListProperty(prop)
        || isMapProperty(prop)
        // A UnionProperty is only Collection if it defines ItemTypes or PrimitiveItemTypes
        || (isUnionProperty(prop) && !!(prop.ItemTypes || prop.PrimitiveItemTypes));
}
exports.isCollectionProperty = isCollectionProperty;
function isListProperty(prop) {
    return prop.Type === 'List';
}
exports.isListProperty = isListProperty;
function isPrimitiveListProperty(prop) {
    return isListProperty(prop) && !!prop.PrimitiveItemType;
}
exports.isPrimitiveListProperty = isPrimitiveListProperty;
function isComplexListProperty(prop) {
    return isListProperty(prop) && !!prop.ItemType;
}
exports.isComplexListProperty = isComplexListProperty;
function isMapProperty(prop) {
    return prop.Type === 'Map';
}
exports.isMapProperty = isMapProperty;
function isPrimitiveMapProperty(prop) {
    return isMapProperty(prop) && !!prop.PrimitiveItemType;
}
exports.isPrimitiveMapProperty = isPrimitiveMapProperty;
function isComplexMapProperty(prop) {
    return isMapProperty(prop) && !!prop.ItemType;
}
exports.isComplexMapProperty = isComplexMapProperty;
function isUnionProperty(prop) {
    const castProp = prop;
    return !!(castProp.ItemTypes || castProp.PrimitiveTypes || castProp.Types);
}
exports.isUnionProperty = isUnionProperty;
var PropertyScrutinyType;
(function (PropertyScrutinyType) {
    /**
     * No additional scrutiny
     */
    PropertyScrutinyType["None"] = "None";
    /**
     * This is an IAM policy directly on a resource
     */
    PropertyScrutinyType["InlineResourcePolicy"] = "InlineResourcePolicy";
    /**
     * Either an AssumeRolePolicyDocument or a dictionary of policy documents
     */
    PropertyScrutinyType["InlineIdentityPolicies"] = "InlineIdentityPolicies";
    /**
     * A list of managed policies (on an identity resource)
     */
    PropertyScrutinyType["ManagedPolicies"] = "ManagedPolicies";
    /**
     * A set of ingress rules (on a security group)
     */
    PropertyScrutinyType["IngressRules"] = "IngressRules";
    /**
     * A set of egress rules (on a security group)
     */
    PropertyScrutinyType["EgressRules"] = "EgressRules";
})(PropertyScrutinyType = exports.PropertyScrutinyType || (exports.PropertyScrutinyType = {}));
function isPropertyScrutinyType(str) {
    return PropertyScrutinyType[str] !== undefined;
}
exports.isPropertyScrutinyType = isPropertyScrutinyType;
/**
 * This function validates that the property **can** be a Tag Property
 *
 * The property is only a Tag if the name of this property is Tags, which is
 * validated using `ResourceType.isTaggable(resource)`.
 */
function isTagProperty(prop) {
    return (isTagPropertyStandard(prop) ||
        isTagPropertyAutoScalingGroup(prop) ||
        isTagPropertyJson(prop) ||
        isTagPropertyStringMap(prop));
}
exports.isTagProperty = isTagProperty;
function isTagPropertyStandard(prop) {
    return prop.ItemType === 'Tag';
}
exports.isTagPropertyStandard = isTagPropertyStandard;
function isTagPropertyAutoScalingGroup(prop) {
    return prop.ItemType === 'TagProperty';
}
exports.isTagPropertyAutoScalingGroup = isTagPropertyAutoScalingGroup;
function isTagPropertyJson(prop) {
    return prop.PrimitiveType === base_types_1.PrimitiveType.Json;
}
exports.isTagPropertyJson = isTagPropertyJson;
function isTagPropertyStringMap(prop) {
    return prop.PrimitiveItemType === 'String';
}
exports.isTagPropertyStringMap = isTagPropertyStringMap;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvcGVydHkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJwcm9wZXJ0eS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDZDQUF5RDtBQXNIekQsSUFBWSxVQUlYO0FBSkQsV0FBWSxVQUFVO0lBQ3BCLHlDQUEyQixDQUFBO0lBQzNCLHFDQUF1QixDQUFBO0lBQ3ZCLGlDQUFtQixDQUFBO0FBQ3JCLENBQUMsRUFKVyxVQUFVLEdBQVYsa0JBQVUsS0FBVixrQkFBVSxRQUlyQjtBQUVELFNBQWdCLFlBQVksQ0FBQyxHQUFXO0lBQ3RDLFFBQVEsR0FBRyxFQUFFO1FBQ2IsS0FBSyxVQUFVLENBQUMsV0FBVyxDQUFDO1FBQzVCLEtBQUssVUFBVSxDQUFDLFNBQVMsQ0FBQztRQUMxQixLQUFLLFVBQVUsQ0FBQyxPQUFPO1lBQ3JCLE9BQU8sSUFBSSxDQUFDO1FBQ2Q7WUFDRSxPQUFPLEtBQUssQ0FBQztLQUNkO0FBQ0gsQ0FBQztBQVRELG9DQVNDO0FBRUQsU0FBZ0IsZUFBZSxDQUFDLElBQWM7SUFDNUMsT0FBTyxtQkFBbUIsQ0FBQyxJQUFJLENBQUM7V0FDM0IsaUJBQWlCLENBQUMsSUFBSSxDQUFDO1FBQzFCLHVFQUF1RTtXQUNwRSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDO0FBQ3hFLENBQUM7QUFMRCwwQ0FLQztBQUVELFNBQWdCLG1CQUFtQixDQUFDLElBQWM7SUFDaEQsT0FBTyxDQUFDLENBQUUsSUFBMEIsQ0FBQyxhQUFhLENBQUM7QUFDckQsQ0FBQztBQUZELGtEQUVDO0FBRUQsU0FBZ0IsaUJBQWlCLENBQUMsSUFBYztJQUM5QyxNQUFNLFFBQVEsR0FBSSxJQUF3QixDQUFDLElBQUksQ0FBQztJQUNoRCxPQUFPLFFBQVEsSUFBSSxJQUFJLElBQUksUUFBUSxLQUFLLEtBQUssSUFBSSxRQUFRLEtBQUss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RSxDQUFDO0FBRkQsc0VBRUM7QUFFRCxTQUFnQixpQkFBaUIsQ0FBQyxJQUFjO0lBQzlDLE9BQVEsSUFBd0IsQ0FBQyxhQUFhLEtBQUssMEJBQWEsQ0FBQyxJQUFJLENBQUM7QUFDeEUsQ0FBQztBQUZELDhDQUVDO0FBRUQsU0FBZ0Isc0JBQXNCLENBQUMsSUFBYztJQUNuRCxPQUFRLElBQTZCLENBQUMsaUJBQWlCLEtBQUssUUFBUSxDQUFDO0FBQ3ZFLENBQUM7QUFGRCx3REFFQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERvY3VtZW50ZWQsIFByaW1pdGl2ZVR5cGUgfSBmcm9tICcuL2Jhc2UtdHlwZXMnO1xuXG5leHBvcnQgdHlwZSBQcm9wZXJ0eSA9IFNjYWxhclByb3BlcnR5IHwgQ29sbGVjdGlvblByb3BlcnR5O1xuZXhwb3J0IHR5cGUgU2NhbGFyUHJvcGVydHkgPSBQcmltaXRpdmVQcm9wZXJ0eSB8IENvbXBsZXhQcm9wZXJ0eSB8IFVuaW9uUHJvcGVydHk7XG5leHBvcnQgdHlwZSBDb2xsZWN0aW9uUHJvcGVydHkgPSBMaXN0UHJvcGVydHkgfCBNYXBQcm9wZXJ0eSB8IFVuaW9uUHJvcGVydHk7XG5leHBvcnQgdHlwZSBMaXN0UHJvcGVydHkgPSBQcmltaXRpdmVMaXN0UHJvcGVydHkgfCBDb21wbGV4TGlzdFByb3BlcnR5O1xuZXhwb3J0IHR5cGUgTWFwUHJvcGVydHkgPSBQcmltaXRpdmVNYXBQcm9wZXJ0eSB8IENvbXBsZXhNYXBQcm9wZXJ0eTtcbmV4cG9ydCB0eXBlIFRhZ1Byb3BlcnR5ID0gVGFnUHJvcGVydHlTdGFuZGFyZCB8IFRhZ1Byb3BlcnR5QXV0b1NjYWxpbmdHcm91cCB8IFRhZ1Byb3BlcnR5SnNvbiB8IFRhZ1Byb3BlcnR5U3RyaW5nTWFwO1xuXG5leHBvcnQgaW50ZXJmYWNlIFByb3BlcnR5QmFzZSBleHRlbmRzIERvY3VtZW50ZWQge1xuICAvKipcbiAgICogSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHByb3BlcnR5IGlzIHJlcXVpcmVkLlxuICAgKlxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cbiAgUmVxdWlyZWQ/OiBib29sZWFuO1xuICAvKipcbiAgICogRHVyaW5nIGEgc3RhY2sgdXBkYXRlLCB0aGUgdXBkYXRlIGJlaGF2aW9yIHdoZW4geW91IGFkZCwgcmVtb3ZlLCBvciBtb2RpZnkgdGhlIHByb3BlcnR5LiBBV1MgQ2xvdWRGb3JtYXRpb25cbiAgICogcmVwbGFjZXMgdGhlIHJlc291cmNlIHdoZW4geW91IGNoYW5nZSBgw4xtbXV0YWJsZWBgcHJvcGVydGllcy4gQVdTIENsb3VkRm9ybWF0aW9uIGRvZXNuJ3QgcmVwbGFjZSB0aGUgcmVzb3VyY2VcbiAgICogd2hlbiB5b3UgY2hhbmdlIGBgTXV0YWJsZWBgIHByb3BlcnRpZXMuIGBgQ29uZGl0aW9uYWxgYCB1cGRhdGVzIGNhbiBiZSBtdXRhYmxlIG9yIGltbXV0YWJsZSwgZGVwZW5kaW5nIG9uLCBmb3JcbiAgICogZXhhbXBsZSwgd2hpY2ggb3RoZXIgcHJvcGVydGllcyB5b3UgdXBkYXRlZC5cbiAgICpcbiAgICogQGRlZmF1bHQgVXBkYXRlVHlwZS5NdXRhYmxlXG4gICAqL1xuICBVcGRhdGVUeXBlPzogVXBkYXRlVHlwZTtcblxuICAvKipcbiAgICogRHVyaW5nIGEgc3RhY2sgdXBkYXRlLCB3aGF0IGtpbmQgb2YgYWRkaXRpb25hbCBzY3J1dGlueSBjaGFuZ2VzIHRvIHRoaXMgcHJvcGVydHkgc2hvdWxkIGJlIHN1YmplY3RlZCB0b1xuICAgKlxuICAgKiBAZGVmYXVsdCBOb25lXG4gICAqL1xuICBTY3J1dGlueVR5cGU/OiBQcm9wZXJ0eVNjcnV0aW55VHlwZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcmltaXRpdmVQcm9wZXJ0eSBleHRlbmRzIFByb3BlcnR5QmFzZSB7XG4gIC8qKiBUaGUgdmFsaWQgcHJpbWl0aXZlIHR5cGUgZm9yIHRoZSBwcm9wZXJ0eS4gKi9cbiAgUHJpbWl0aXZlVHlwZTogUHJpbWl0aXZlVHlwZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb21wbGV4UHJvcGVydHkgZXh0ZW5kcyBQcm9wZXJ0eUJhc2Uge1xuICAvKiogVGhlIHR5cGUgb2YgdmFsaWQgdmFsdWVzIGZvciB0aGlzIHByb3BlcnR5ICovXG4gIFR5cGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMaXN0UHJvcGVydHlCYXNlIGV4dGVuZHMgUHJvcGVydHlCYXNlIHtcbiAgLyoqXG4gICAqIEEgbGlzdCBpcyBhIGNvbW1hLXNlcGFyYXRlZCBsaXN0IG9mIHZhbHVlcy5cbiAgICovXG4gIFR5cGU6ICdMaXN0JztcbiAgLyoqXG4gICAqIEluZGljYXRlcyB3aGV0aGVyIEFXUyBDbG91ZEZvcm1hdGlvbiBhbGxvd3MgZHVwbGljYXRlIHZhbHVlcy4gSWYgdGhlIHZhbHVlIGlzIGBgdHJ1ZWBgLCBBV1MgQ2xvdWRGb3JtYXRpb25cbiAgICogaWdub3JlcyBkdXBsaWNhdGUgdmFsdWVzLiBpZiB0aGUgdmFsdWUgaXMgIGBgZmFsc2VgYCwgQVdTIENsb3VkRm9ybWF0aW9uIHJldHVybnMgYW4gYXJyb3IgaWYgeW91IHN1Ym1pdCBkdXBsaWNhdGVcbiAgICogdmFsdWVzLlxuICAgKi9cbiAgRHVwbGljYXRlc0FsbG93ZWQ/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByaW1pdGl2ZUxpc3RQcm9wZXJ0eSBleHRlbmRzIExpc3RQcm9wZXJ0eUJhc2Uge1xuICAvKiogVGhlIHZhbGlkIHByaW1pdGl2ZSB0eXBlIGZvciB0aGUgcHJvcGVydHkuICovXG4gIFByaW1pdGl2ZUl0ZW1UeXBlOiBQcmltaXRpdmVUeXBlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBsZXhMaXN0UHJvcGVydHkgZXh0ZW5kcyBMaXN0UHJvcGVydHlCYXNlIHtcbiAgLyoqIFZhbGlkIHZhbHVlcyBmb3IgdGhlIHByb3BlcnR5ICovXG4gIEl0ZW1UeXBlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWFwUHJvcGVydHlCYXNlIGV4dGVuZHMgUHJvcGVydHlCYXNlIHtcbiAgLyoqIEEgbWFwIGlzIGEgc2V0IG9mIGtleS12YWx1ZSBwYWlycywgd2hlcmUgdGhlIGtleXMgYXJlIGFsd2F5cyBzdHJpbmdzLiAqL1xuICBUeXBlOiAnTWFwJztcbiAgLyoqXG4gICAqIEluZGljYXRlcyB3aGV0aGVyIEFXUyBDbG91ZEZvcm1hdGlvbiBhbGxvd3MgZHVwbGljYXRlIHZhbHVlcy4gSWYgdGhlIHZhbHVlIGlzIGBgdHJ1ZWBgLCBBV1MgQ2xvdWRGb3JtYXRpb25cbiAgICogaWdub3JlcyBkdXBsaWNhdGUgdmFsdWVzLiBpZiB0aGUgdmFsdWUgaXMgIGBgZmFsc2VgYCwgQVdTIENsb3VkRm9ybWF0aW9uIHJldHVybnMgYW4gYXJyb3IgaWYgeW91IHN1Ym1pdCBkdXBsaWNhdGVcbiAgICogdmFsdWVzLlxuICAgKi9cbiAgRHVwbGljYXRlc0FsbG93ZWQ/OiBmYWxzZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcmltaXRpdmVNYXBQcm9wZXJ0eSBleHRlbmRzIE1hcFByb3BlcnR5QmFzZSB7XG4gIC8qKiBUaGUgdmFsaWQgcHJpbWl0aXZlIHR5cGUgZm9yIHRoZSBwcm9wZXJ0eS4gKi9cbiAgUHJpbWl0aXZlSXRlbVR5cGU6IFByaW1pdGl2ZVR5cGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxleE1hcFByb3BlcnR5IGV4dGVuZHMgTWFwUHJvcGVydHlCYXNlIHtcbiAgLyoqIFZhbGlkIHZhbHVlcyBmb3IgdGhlIHByb3BlcnR5ICovXG4gIEl0ZW1UeXBlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGFnUHJvcGVydHlTdGFuZGFyZCBleHRlbmRzIFByb3BlcnR5QmFzZSB7XG4gIEl0ZW1UeXBlOiAnVGFnJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUYWdQcm9wZXJ0eUF1dG9TY2FsaW5nR3JvdXAgZXh0ZW5kcyBQcm9wZXJ0eUJhc2Uge1xuICBJdGVtVHlwZTogJ1RhZ1Byb3BlcnR5Jztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUYWdQcm9wZXJ0eUpzb24gZXh0ZW5kcyBQcm9wZXJ0eUJhc2Uge1xuICBQcmltaXRpdmVUeXBlOiBQcmltaXRpdmVUeXBlLkpzb247XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGFnUHJvcGVydHlTdHJpbmdNYXAgZXh0ZW5kcyBQcm9wZXJ0eUJhc2Uge1xuICBQcmltaXRpdmVJdGVtVHlwZTogJ1N0cmluZyc7XG59XG5cbi8qKlxuICogQSBwcm9wZXJ0eSB0eXBlIHRoYXQgY2FuIGJlIG9uZSBvZiBzZXZlcmFsIHR5cGVzLiBDdXJyZW50bHkgdXNlZCBvbmx5IGluIFNBTS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVbmlvblByb3BlcnR5IGV4dGVuZHMgUHJvcGVydHlCYXNlIHtcbiAgLyoqIFZhbGlkIHByaW1pdGl2ZSB0eXBlcyBmb3IgdGhlIHByb3BlcnR5ICovXG4gIFByaW1pdGl2ZVR5cGVzPzogUHJpbWl0aXZlVHlwZVtdO1xuICAvKiogVmFsaWQgY29tcGxleCB0eXBlcyBmb3IgdGhlIHByb3BlcnR5ICovXG4gIFR5cGVzPzogc3RyaW5nW11cbiAgLyoqIFZhbGlkIHByaW1pdGl2ZSBpdGVtIHR5cGVzIGZvciB0aGlzIHByb3BlcnR5ICovXG4gIFByaW1pdGl2ZUl0ZW1UeXBlcz86IFByaW1pdGl2ZVR5cGVbXTtcbiAgLyoqIFZhbGlkIGxpc3QgaXRlbSB0eXBlcyBmb3IgdGhlIHByb3BlcnR5ICovXG4gIEl0ZW1UeXBlcz86IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgZW51bSBVcGRhdGVUeXBlIHtcbiAgQ29uZGl0aW9uYWwgPSAnQ29uZGl0aW9uYWwnLFxuICBJbW11dGFibGUgPSAnSW1tdXRhYmxlJyxcbiAgTXV0YWJsZSA9ICdNdXRhYmxlJ1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNVcGRhdGVUeXBlKHN0cjogc3RyaW5nKTogc3RyIGlzIFVwZGF0ZVR5cGUge1xuICBzd2l0Y2ggKHN0cikge1xuICBjYXNlIFVwZGF0ZVR5cGUuQ29uZGl0aW9uYWw6XG4gIGNhc2UgVXBkYXRlVHlwZS5JbW11dGFibGU6XG4gIGNhc2UgVXBkYXRlVHlwZS5NdXRhYmxlOlxuICAgIHJldHVybiB0cnVlO1xuICBkZWZhdWx0OlxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNTY2FsYXJQcm9wZXJ5KHByb3A6IFByb3BlcnR5KTogcHJvcCBpcyBTY2FsYXJQcm9wZXJ0eSB7XG4gIHJldHVybiBpc1ByaW1pdGl2ZVByb3BlcnR5KHByb3ApXG4gICAgfHwgaXNDb21wbGV4UHJvcGVydHkocHJvcClcbiAgICAvLyBBIFVuaW9uUHJvcGVydHkgaXMgb25seSBTY2FsYXIgaWYgaXQgZGVmaW5lcyBUeXBlcyBvciBQcmltaXRpdmVUeXBlc1xuICAgIHx8IChpc1VuaW9uUHJvcGVydHkocHJvcCkgJiYgISEocHJvcC5UeXBlcyB8fCBwcm9wLlByaW1pdGl2ZVR5cGVzKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1ByaW1pdGl2ZVByb3BlcnR5KHByb3A6IFByb3BlcnR5KTogcHJvcCBpcyBQcmltaXRpdmVQcm9wZXJ0eSB7XG4gIHJldHVybiAhIShwcm9wIGFzIFByaW1pdGl2ZVByb3BlcnR5KS5QcmltaXRpdmVUeXBlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNDb21wbGV4UHJvcGVydHkocHJvcDogUHJvcGVydHkpOiBwcm9wIGlzIENvbXBsZXhQcm9wZXJ0eSB7XG4gIGNvbnN0IHByb3BUeXBlID0gKHByb3AgYXMgQ29tcGxleFByb3BlcnR5KS5UeXBlO1xuICByZXR1cm4gcHJvcFR5cGUgIT0gbnVsbCAmJiBwcm9wVHlwZSAhPT0gJ01hcCcgJiYgcHJvcFR5cGUgIT09ICdMaXN0Jztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQ29sbGVjdGlvblByb3BlcnR5KHByb3A6IFByb3BlcnR5KTogcHJvcCBpcyBDb2xsZWN0aW9uUHJvcGVydHkge1xuICByZXR1cm4gaXNMaXN0UHJvcGVydHkocHJvcClcbiAgICB8fCBpc01hcFByb3BlcnR5KHByb3ApXG4gICAgLy8gQSBVbmlvblByb3BlcnR5IGlzIG9ubHkgQ29sbGVjdGlvbiBpZiBpdCBkZWZpbmVzIEl0ZW1UeXBlcyBvciBQcmltaXRpdmVJdGVtVHlwZXNcbiAgICB8fCAoaXNVbmlvblByb3BlcnR5KHByb3ApICYmICEhKHByb3AuSXRlbVR5cGVzIHx8IHByb3AuUHJpbWl0aXZlSXRlbVR5cGVzKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0xpc3RQcm9wZXJ0eShwcm9wOiBQcm9wZXJ0eSk6IHByb3AgaXMgTGlzdFByb3BlcnR5IHtcbiAgcmV0dXJuIChwcm9wIGFzIExpc3RQcm9wZXJ0eSkuVHlwZSA9PT0gJ0xpc3QnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNQcmltaXRpdmVMaXN0UHJvcGVydHkocHJvcDogUHJvcGVydHkpOiBwcm9wIGlzIFByaW1pdGl2ZUxpc3RQcm9wZXJ0eSB7XG4gIHJldHVybiBpc0xpc3RQcm9wZXJ0eShwcm9wKSAmJiAhIShwcm9wIGFzIFByaW1pdGl2ZUxpc3RQcm9wZXJ0eSkuUHJpbWl0aXZlSXRlbVR5cGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0NvbXBsZXhMaXN0UHJvcGVydHkocHJvcDogUHJvcGVydHkpOiBwcm9wIGlzIENvbXBsZXhMaXN0UHJvcGVydHkge1xuICByZXR1cm4gaXNMaXN0UHJvcGVydHkocHJvcCkgJiYgISEocHJvcCBhcyBDb21wbGV4TGlzdFByb3BlcnR5KS5JdGVtVHlwZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTWFwUHJvcGVydHkocHJvcDogUHJvcGVydHkpOiBwcm9wIGlzIE1hcFByb3BlcnR5IHtcbiAgcmV0dXJuIChwcm9wIGFzIE1hcFByb3BlcnR5KS5UeXBlID09PSAnTWFwJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUHJpbWl0aXZlTWFwUHJvcGVydHkocHJvcDogUHJvcGVydHkpOiBwcm9wIGlzIFByaW1pdGl2ZU1hcFByb3BlcnR5IHtcbiAgcmV0dXJuIGlzTWFwUHJvcGVydHkocHJvcCkgJiYgISEocHJvcCBhcyBQcmltaXRpdmVNYXBQcm9wZXJ0eSkuUHJpbWl0aXZlSXRlbVR5cGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0NvbXBsZXhNYXBQcm9wZXJ0eShwcm9wOiBQcm9wZXJ0eSk6IHByb3AgaXMgQ29tcGxleE1hcFByb3BlcnR5IHtcbiAgcmV0dXJuIGlzTWFwUHJvcGVydHkocHJvcCkgJiYgISEocHJvcCBhcyBDb21wbGV4TWFwUHJvcGVydHkpLkl0ZW1UeXBlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNVbmlvblByb3BlcnR5KHByb3A6IFByb3BlcnR5KTogcHJvcCBpcyBVbmlvblByb3BlcnR5IHtcbiAgY29uc3QgY2FzdFByb3AgPSBwcm9wIGFzIFVuaW9uUHJvcGVydHk7XG4gIHJldHVybiAhIShjYXN0UHJvcC5JdGVtVHlwZXMgfHwgY2FzdFByb3AuUHJpbWl0aXZlVHlwZXMgfHwgY2FzdFByb3AuVHlwZXMpO1xufVxuXG5leHBvcnQgZW51bSBQcm9wZXJ0eVNjcnV0aW55VHlwZSB7XG4gIC8qKlxuICAgKiBObyBhZGRpdGlvbmFsIHNjcnV0aW55XG4gICAqL1xuICBOb25lID0gJ05vbmUnLFxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIGFuIElBTSBwb2xpY3kgZGlyZWN0bHkgb24gYSByZXNvdXJjZVxuICAgKi9cbiAgSW5saW5lUmVzb3VyY2VQb2xpY3kgPSAnSW5saW5lUmVzb3VyY2VQb2xpY3knLFxuXG4gIC8qKlxuICAgKiBFaXRoZXIgYW4gQXNzdW1lUm9sZVBvbGljeURvY3VtZW50IG9yIGEgZGljdGlvbmFyeSBvZiBwb2xpY3kgZG9jdW1lbnRzXG4gICAqL1xuICBJbmxpbmVJZGVudGl0eVBvbGljaWVzID0gJ0lubGluZUlkZW50aXR5UG9saWNpZXMnLFxuXG4gIC8qKlxuICAgKiBBIGxpc3Qgb2YgbWFuYWdlZCBwb2xpY2llcyAob24gYW4gaWRlbnRpdHkgcmVzb3VyY2UpXG4gICAqL1xuICBNYW5hZ2VkUG9saWNpZXMgPSAnTWFuYWdlZFBvbGljaWVzJyxcblxuICAvKipcbiAgICogQSBzZXQgb2YgaW5ncmVzcyBydWxlcyAob24gYSBzZWN1cml0eSBncm91cClcbiAgICovXG4gIEluZ3Jlc3NSdWxlcyA9ICdJbmdyZXNzUnVsZXMnLFxuXG4gIC8qKlxuICAgKiBBIHNldCBvZiBlZ3Jlc3MgcnVsZXMgKG9uIGEgc2VjdXJpdHkgZ3JvdXApXG4gICAqL1xuICBFZ3Jlc3NSdWxlcyA9ICdFZ3Jlc3NSdWxlcycsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1Byb3BlcnR5U2NydXRpbnlUeXBlKHN0cjogc3RyaW5nKTogc3RyIGlzIFByb3BlcnR5U2NydXRpbnlUeXBlIHtcbiAgcmV0dXJuIChQcm9wZXJ0eVNjcnV0aW55VHlwZSBhcyBhbnkpW3N0cl0gIT09IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHZhbGlkYXRlcyB0aGF0IHRoZSBwcm9wZXJ0eSAqKmNhbioqIGJlIGEgVGFnIFByb3BlcnR5XG4gKlxuICogVGhlIHByb3BlcnR5IGlzIG9ubHkgYSBUYWcgaWYgdGhlIG5hbWUgb2YgdGhpcyBwcm9wZXJ0eSBpcyBUYWdzLCB3aGljaCBpc1xuICogdmFsaWRhdGVkIHVzaW5nIGBSZXNvdXJjZVR5cGUuaXNUYWdnYWJsZShyZXNvdXJjZSlgLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNUYWdQcm9wZXJ0eShwcm9wOiBQcm9wZXJ0eSk6IHByb3AgaXMgVGFnUHJvcGVydHkge1xuICByZXR1cm4gKFxuICAgIGlzVGFnUHJvcGVydHlTdGFuZGFyZChwcm9wKSB8fFxuICAgIGlzVGFnUHJvcGVydHlBdXRvU2NhbGluZ0dyb3VwKHByb3ApIHx8XG4gICAgaXNUYWdQcm9wZXJ0eUpzb24ocHJvcCkgfHxcbiAgICBpc1RhZ1Byb3BlcnR5U3RyaW5nTWFwKHByb3ApXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1RhZ1Byb3BlcnR5U3RhbmRhcmQocHJvcDogUHJvcGVydHkpOiBwcm9wIGlzIFRhZ1Byb3BlcnR5U3RhbmRhcmQge1xuICByZXR1cm4gKHByb3AgYXMgVGFnUHJvcGVydHlTdGFuZGFyZCkuSXRlbVR5cGUgPT09ICdUYWcnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNUYWdQcm9wZXJ0eUF1dG9TY2FsaW5nR3JvdXAocHJvcDogUHJvcGVydHkpOiBwcm9wIGlzIFRhZ1Byb3BlcnR5QXV0b1NjYWxpbmdHcm91cCB7XG4gIHJldHVybiAocHJvcCBhcyBUYWdQcm9wZXJ0eUF1dG9TY2FsaW5nR3JvdXApLkl0ZW1UeXBlID09PSAnVGFnUHJvcGVydHknO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNUYWdQcm9wZXJ0eUpzb24ocHJvcDogUHJvcGVydHkpOiBwcm9wIGlzIFRhZ1Byb3BlcnR5SnNvbiB7XG4gIHJldHVybiAocHJvcCBhcyBUYWdQcm9wZXJ0eUpzb24pLlByaW1pdGl2ZVR5cGUgPT09IFByaW1pdGl2ZVR5cGUuSnNvbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVGFnUHJvcGVydHlTdHJpbmdNYXAocHJvcDogUHJvcGVydHkpOiBwcm9wIGlzIFRhZ1Byb3BlcnR5U3RyaW5nTWFwIHtcbiAgcmV0dXJuIChwcm9wIGFzIFRhZ1Byb3BlcnR5U3RyaW5nTWFwKS5QcmltaXRpdmVJdGVtVHlwZSA9PT0gJ1N0cmluZyc7XG59XG4iXX0=