import cxapi = require('@aws-cdk/cx-api');
import { Renames } from '../../renames';
import { Configuration } from '../../settings';
import { SDK } from '../util/sdk';
declare type Synthesizer = (aws: SDK, config: Configuration) => Promise<cxapi.SynthesizeResponse>;
export interface AppStacksProps {
    /**
     * Whether to be verbose
     *
     * @default false
     */
    verbose?: boolean;
    /**
     * Don't stop on error metadata
     *
     * @default false
     */
    ignoreErrors?: boolean;
    /**
     * Treat warnings in metadata as errors
     *
     * @default false
     */
    strict?: boolean;
    /**
     * Application configuration (settings and context)
     */
    configuration: Configuration;
    /**
     * AWS object (used by synthesizer and contextprovider)
     */
    aws: SDK;
    /**
     * Renames to apply
     */
    renames?: Renames;
    /**
     * Callback invoked to synthesize the actual stacks
     */
    synthesizer: Synthesizer;
}
/**
 * Routines to get stacks from an app
 *
 * In a class because it shares some global state
 */
export declare class AppStacks {
    private readonly props;
    /**
     * Since app execution basically always synthesizes all the stacks,
     * we can invoke it once and cache the response for subsequent calls.
     */
    private cachedResponse?;
    private readonly renames;
    constructor(props: AppStacksProps);
    /**
     * List all stacks in the CX and return the selected ones
     *
     * It's an error if there are no stacks to select, or if one of the requested parameters
     * refers to a nonexistant stack.
     */
    selectStacks(selectors: string[], extendedSelection: ExtendedStackSelection): Promise<SelectedStack[]>;
    /**
     * Return all stacks in the CX
     *
     * If the stacks have dependencies between them, they will be returned in
     * topologically sorted order. If there are dependencies that are not in the
     * set, they will be ignored; it is the user's responsibility that the
     * non-selected stacks have already been deployed previously.
     *
     * Renames are *NOT* applied in list mode.
     */
    listStacks(): Promise<cxapi.SynthesizedStack[]>;
    /**
     * Synthesize a single stack
     */
    synthesizeStack(stackName: string): Promise<SelectedStack>;
    /**
     * Synthesize a set of stacks
     */
    synthesizeStacks(): Promise<cxapi.SynthesizeResponse>;
    /**
     * Extracts 'aws:cdk:warning|info|error' metadata entries from the stack synthesis
     */
    private processMessages;
    private printMessage;
    private applyRenames;
}
/**
 * Combine the names of a set of stacks using a comma
 */
export declare function listStackNames(stacks: cxapi.SynthesizedStack[]): string;
/**
 * When selecting stacks, what other stacks to include because of dependencies
 */
export declare enum ExtendedStackSelection {
    /**
     * Don't select any extra stacks
     */
    None = 0,
    /**
     * Include stacks that this stack depends on
     */
    Upstream = 1,
    /**
     * Include stacks that depend on this stack
     */
    Downstream = 2
}
export interface SelectedStack extends cxapi.SynthesizedStack {
    /**
     * The original name of the stack before renaming
     */
    originalName: string;
}
export {};
